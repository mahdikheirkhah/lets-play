spring.application.name=lets-play
spring.data.mongodb.uri=mongodb://localhost:27017/lets-play
application.security.jwt.secret-key=hh2gS4+0vg3EjQFdJ1pqKsJphfG3zRlLFJUFCIwtV+c=
# Enable Bucket4j
bucket4j.enabled=true

# --- Filter 0: Strict limit for the login endpoint (identified by IP address) ---
# Protects against brute-force attacks from a single IP.
bucket4j.filters[0].cache-name=buckets
bucket4j.filters[0].url=^/api/auth/login.*
bucket4j.filters[0].strategy=rate-limit
bucket4j.filters[0].rate-limits[0].bandwidths[0].capacity=10
bucket4j.filters[0].rate-limits[0].bandwidths[0].time=1
bucket4j.filters[0].rate-limits[0].bandwidths[0].unit=minutes
# Use the IP address to identify the user before they log in.
bucket4j.filters[0].rate-limits[0].expression=getRemoteAddr()

# --- Filter 1: General limit for all other secured API endpoints ---
# Prevents a logged-in user from spamming the API.
bucket4j.filters[1].cache-name=buckets
bucket4j.filters[1].url=^/api/.*
bucket4j.filters[1].strategy=rate-limit
bucket4j.filters[1].rate-limits[0].bandwidths[0].capacity=100
bucket4j.filters[1].rate-limits[0].bandwidths[0].time=1
bucket4j.filters[1].rate-limits[0].bandwidths[0].unit=minutes
# Use the logged-in user's name to identify them.
bucket4j.filters[1].rate-limits[0].expression=getAuthentication().getName()
